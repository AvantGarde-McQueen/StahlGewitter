scripted_gui = {
	SG_treasury_topbar = {
		window_name = "SG_treasury_topbar"
		context_type = player_context
		parent_window_token = top_bar
			
		visible = {
		}

		effects = {
		}
		properties = {
			treasury_icon = {
				image = "[TreasuryIcon]"
			}
		}
	}
	SG_economy_tab_button = {
		window_name = "SG_economy_tab_button"
		context_type = player_context
		parent_window_token = trade_tab
			
		visible = {
			is_ai = no
		}
		properties = {
			economy_tab = {
				frame = economy_tab
			}
			trade_tab = {
				frame = trade_tab
			}
		}

		effects = {
			economy_tab_click = {
				set_country_flag = economy_GUI_open

				set_variable = { economy_tab = 2 }
				set_variable = { trade_tab = 1 }
			}
			trade_tab_click = {
				clr_country_flag = economy_GUI_open

				set_variable = { economy_tab = 1 }
				set_variable = { trade_tab = 2 }
			}
		}
	}
	SG_trade_GUI_frame = {
		window_name = "SG_trade_GUI_frame"
		context_type = player_context
		parent_window_token = trade_tab
			
		visible = {
		}

		effects = {
		}
		properties = {
		}
	}
	SG_economy_GUI = {
		window_name = "SG_economy_GUI"
		context_type = player_context
		parent_window_token = trade_tab
			
		visible = {
			has_country_flag = economy_GUI_open
		}

		triggers = {
			military_austerity_button_click_enabled = {
				NOT = {
					has_idea = economy_military_austerity
				}
			}
			war_mobilization_button_click_enabled = {
				NOT = {
					has_idea = economy_war_mobilization
				}
				has_war = yes
			}

			deficit_value_visible = { check_variable = { economy_info = 0 } }
			deficit_percentage_visible = { check_variable = { economy_info = 0 } }

			unemployment_value_visible = { check_variable = { economy_info = 1 } }
			unemployment_improve_visible = { check_variable = { economy_info = 1 } }

			# law_entry_up_button_click_enabled = {
			# 	if = {
			# 		limit = { check_variable = { v = 1 } }
			# 		NOT = { has_idea = personal_consignment_0 }
			# 	}
			# 	if = {
			# 		limit = { check_variable = { v = 2 } }
			# 		NOT = { has_idea = open_trade_0 }
			# 	}
			# 	if = {
			# 		limit = { check_variable = { v = 3 } }
			# 		NOT = { has_idea = disarmed_nation_0 }
			# 	}
			# }
			# law_entry_down_button_click_enabled = {
			# 	if = {
			# 		limit = { check_variable = { v = 1 } }
			# 		available_investment_up = yes
			# 	}
			# 	if = {
			# 		limit = { check_variable = { v = 2 } }
			# 		available_trade_law_up = yes
			# 	}
			# 	if = {
			# 		limit = { check_variable = { v = 3 } }
			# 		available_conscription_law_up = yes
			# 	}
			# }

			deficit_tab_button_click_enabled = {
				NOT = { check_variable = { economy_info = 0 } }
			}
			unemployment_tab_button_click_enabled = {
				NOT = { check_variable = { economy_info = 1 } }
			}

			unemployment_pie_visible = {
				NOT = { check_variable = { unemployment_rate = 0 } }
			}
			deficit_pie_visible = {
				NOT = { check_variable = { economy_deficit = 0 } }
			}

			#cursor spam
			cursor_icon_0_visible = {
				if = {
					limit = { check_variable = { v = 1 } }
					has_idea = personal_consignment_0
				}
				if = {
					limit = { check_variable = { v = 2 } }
					has_idea = open_trade_0
				}
				if = {
					limit = { check_variable = { v = 3 } }
					has_idea = disarmed_nation_0
				}
			}
			cursor_icon_1_visible = {
				if = {
					limit = { check_variable = { v = 1 } }
					has_idea = private_economy_1
				}
				if = {
					limit = { check_variable = { v = 2 } }
					has_idea = active_trade_1
				}
				if = {
					limit = { check_variable = { v = 3 } }
					has_idea = volunteer_only_1
				}
			}
			cursor_icon_2_visible = {
				if = {
					limit = { check_variable = { v = 1 } }
					has_idea = reduced_welfare_2
				}
				if = {
					limit = { check_variable = { v = 2 } }
					has_idea = border_control_2
				}
				if = {
					limit = { check_variable = { v = 3 } }
					has_idea = limited_conscription_2
				}
			}
			cursor_icon_3_visible = {
				if = {
					limit = { check_variable = { v = 1 } }
					has_idea = early_mobilization_3
				}
				if = {
					limit = { check_variable = { v = 2 } }
					has_idea = self_sufficient_nation_3
				}
				if = {
					limit = { check_variable = { v = 3 } }
					has_idea = extensive_conscription_3
				}
			}
			cursor_icon_4_visible = {
				if = {
					limit = { check_variable = { v = 1 } }
					has_idea = military_state_4
				}
				if = {
					limit = { check_variable = { v = 2 } }
					always = no
				}
				if = {
					limit = { check_variable = { v = 3 } }
					has_idea = service_by_requirement_4
				}
			}

			range_icon_4_visible = {
				NOT = { check_variable = { v = 2 } }
			}
		}

		effects = {
			economy_close_button_click = {
				clr_country_flag = economy_GUI_open
			}

			military_austerity_button_click = {
				add_timed_idea = {
					idea = economy_military_austerity
					days = 30
				}
				economy_military_spend_calc = yes
				economy_index_calc = yes
			}
			war_mobilization_button_click = {
				add_timed_idea = {
					idea = economy_war_mobilization
					days = 30
				}
				economy_military_spend_calc = yes
				economy_index_calc = yes
			}

			law_entry_up_button_click = {
				if = {
					limit = { check_variable = { v = 1 } }
					economic_investment_down = yes
				}
				if = {
					limit = { check_variable = { v = 2 } }
					economic_trade_law_down = yes
				}
				if = {
					limit = { check_variable = { v = 3 } }
					economic_conscription_law_down = yes
				}

				economy_index_calc = yes
			}
			law_entry_down_button_click = {
				if = {
					limit = { check_variable = { v = 1 } }
					economic_investment_up = yes
				}
				if = {
					limit = { check_variable = { v = 2 } }
					economic_trade_law_up = yes
				}
				if = {
					limit = { check_variable = { v = 3 } }
					economic_conscription_law_up = yes
				}

				economy_index_calc = yes
			}

			deficit_tab_button_click = {
				set_variable = { economy_info = 0 }
			}
			unemployment_tab_button_click = {
				set_variable = { economy_info = 1 }
			}
		}

		dynamic_lists = {
			economy_idea_grid = {
				array = economy_idea
				entry_container = "SG_economy_idea_entry"
			}

			economy_law_grid = {
				array = economy_law_gui
				entry_container = "SG_economy_law_entry"
			}

			range_grid = {
				array = economy_law_gui
				entry_container = "SG_economy_law_range_entry"
			}
			cursor_grid = {
				array = economy_law_gui
				entry_container = "SG_economy_law_cursor_entry"
			}
		}

		properties = {
			economy_ideology_icon = {
				image = "[GetEconomyIdeologyIcon]"
			}
			economy_type_icon = {
				image = "[GetEconomyTypeIcon]"
			}

			progress_cursor = {
				x = economy_progress_gui
			}

			idea_entry_icon = {
				image = "[EconomyIdeaIcon]"
			}

			law_entry_icon = {
				image = "[Get_law_entry_icon]"
			}

			range_icon_0 = {
				image = "GFX_SG_bar"
			}
			range_icon_1 = {
				image = "[GetLawRangeIcon_1]"
			}
			range_icon_2 = {
				image = "[GetLawRangeIcon_2]"
			}
			range_icon_3 = {
				image = "[GetLawRangeIcon_3]"
			}
			range_icon_4 = {
				image = "[GetLawRangeIcon_4]"
			}

			deficit_pie = { frame = economy_deficit_ratio_GUI }
			unemployment_pie = { frame = unemployment_rate_GUI }
			
			law_entry_up_button = { frame = 1 }
			law_entry_down_button = { frame = 2 }

			deficit_tab_button = { frame = 1 }
			unemployment_tab_button = { frame = 2 }

			# economy_revenue_limit_ProgressBar = { frame = revenue_ratio }

			# #piechart
			# other_income_piechart = { frame = THIS.other_income_pie }
			# pop_tax_income_piechart = { frame = THIS.income_pop_pie }
			# consumer_goods_income_piechart = { frame = THIS.consumer_goods_ic_pie }

			# navy_spending_piechart = { frame = THIS.navy_spending_pie }
			# army_spending_piechart = { frame = THIS.army_spending_pie }
			# social_spending_piechart = { frame = THIS.social_spending_pie }
		}
	}
}